# 스프링 핵심원리 - 기본편

## 스프링이란?

스프링은 여러 기술들의 모임이다.
가장 기본이 되는 `스프링 프레임워크` , 스프링을 편리하게 사용하게 해주는 `스프링 부트` 그 외에 `스프링 데이터` , `스프링 세션` , `스프링 배치` , `스프링 시큐리티` 등이 있다.

`[spring.io](http://spring.io)` 에 들어가보면 스프링에서 사용할 수 있는 다양한 프로젝트들을 볼 수 있다.
이중에 가장 핵심은 `스프링 프레임워크` 이다.

스프링 프레임워크는 다음과 같이 이루어진다.

- 핵심 기술 : DI, AOP, 이벤트, 기타
- 웹 기술 : 스프링 MVC, 스프링 WebFlux
- 데이터 접근 기술 : 트랜잭션, JDBC, ORM 등
- 기술 통합 : 캐시, 이메일, 스케줄링
- 테스트 : 스프링 기반 테스트 지원
- 언어 : 코틀린 그루비

최근에는 이러한 기술들을 편리하게 사용할 수 있는 `스프링 부트` 를 사용한다.

## 스프링 부트의 장점

스프링을 편리하게 사용 할 수 있도록 지원한다. 스프링 프레임워크만을 이용할 경우, tomcat과 같은 was를 따로 설정해야 하는 등 번거로운 작업이 존재했지만 스프링부트는 이런 기능들이 내장되어 있어 편리하게 사용이 가능하다. 

또한 손쉬운 빌드 구성을 위한 starter를 제공하기에 여러가지 라이브러리 의존성 문제도 도움을 받을 수 있다.

스프링부트는 결국 스프링을 편리하게 사용할 수 있도록 도와주는 것이다. 스프링 프레임워크 없이 단독적으로 사용할 수 있는 것이 아니다.

## 스프링은 어떻게 등장했을까 ?

개발자들이 “왜” 스프링이라는 기술을 만들었는지 알아야 한다.
스프링을 잘하기 위해서는 스프링의 핵심 컨셉을 이해하고 있어야 한다.

스프링의 핵심은 객체지향 언어가 가진 강력한 특징을 살려내는 프레임워크다.
즉, `좋은 객체 지향` 애플리케이션을 개발할 수 있게 도와주는 프레임워크이다.

## 좋은 객체지향 프로그래밍이란?

그렇다면 좋은 객체지향 프로그래밍은 무엇일까?

객체지향 프로그래밍이란 프로그램을 “객체들의 모임" 으로 파악하고자 하는 것이다.
객체는 자신의 `역할`에 따라 맡겨진 `책임`을 다하며 다른 객체들과 메세지를 통해 `협력` 해야 한다!

### 다형성

객체지향의 핵심은 `다형성` 이다.

실세계로 예를들어 이해해보자.

운전자는 자동차의 면허가 있으면 여러 자동차를 운전할 수 있다.
자동차를 바꿨다고 해서 운전 면허를 새롭게 딸 필요는 없다.
이는 자동차의 역할에 알맞은 `인터페이스` 에 맞게 다양한 자동차들이 구현되어 있기 때문이다.
내가 K3를 타다가, 아반떼로 차를 바꿨다고 해서 새롭게 면허를 딸 필요는 없는 것이다.

이것이 가능한 이유는 여러 자동차 회사에서 만드는 자동차들이 운전자를 위해 `자동차 인터페이스` 에 맞게 자동차를 만들었기 때문이다. 그렇기에, 우리는(클라이언트) 어떠한 변화 없이 새로운 자동차를 탈 수 있는 것이다.

또 다른 예시는 `공연` 을 생각해보자.
로미오와 줄리엣 공연이 있다. 로미오 역할을 하는 사람은 계속해서 바뀔 수 있다. 줄리엣 역할을 하는 사람 역시 바뀔 수 있다. 역할을 하는 배우가 바뀐다고 해서 로미오랑 줄리엣의 역할이 바뀌는 것이 아니다. 이는 로미오에 알맞은, 줄리엣에 알맞은 `인터페이스` 에 맞춰 배우들이 그 역할에 최선을 다하기 때문이다.

이렇게 `역할` 과 `구현` 으로 구분하면 변경이 유연해지고 편리해진다. 이렇게 되면 클라이언트는 대상의 `역할` 에만 집중하면 된다. 그 내부가 어떻게 이루어지는지 몰라도 상관 없다. 또한 `구현` 의 내부 구조가 변경되어도 영향을 받지 않는다.

자바에서 이런 `역할` 과 `구현` 을 표현할 수 있다.
역할은 `인터페이스` 로 구현은 `인터페이스를 구현한 클래스, 객체` 가 된다. 
겍체를 설계할 때는 `역할` 과 `구현` 을 분리해야한다. 역할을 먼저 만드는 것이 더 중요하다.

물론 한계점도 존재한다.
인터페이스 자체가 변하면 클라이언트, 서버 모두에 큰 변경이 발생하게 된다.
그렇기에 인터페이스를 안정적으로 잘 설게하는 것이 *매우 중요* 하다 

## 스프링과 객체 지향

스프링은 다형성을 극대화 하여 이용할 수 있게 도와준다.

스프링에서 등장하는 `제어역전` , `의존성 주입` 등은 다형성을 활용하여 역할과 구현을 편리하게 다룰 수 있도로 지원한다.

## 객체지향 SOLID 원칙

SRP 단일 책임 원칙

- 한 클래스는 하나의 책임만 가져야 한다.
- 책임의 중요한 기준은 변경이다. 변경이 일어났을 때 파급효과가 적어야 한다.

OCP 개방-폐쇄 원칙

- 확장에는 열려있어야 변경에는 닫혀 있어야 한다.

다형성을 활용했음에도 OCP원칙을 지키지 못하는 경우가 있다.
객체를 바꿔끼워야 할 때, 기존 코드를 변경해야 하는 상황이다.

이러한 상황을 해결하기 위해 `의존성 주입(DI)` 과 `제어역전(IOC)` 이 필요하다.

LSP 리스코프 치환 원칙

- 객체는 하위 타입의 인스턴스로 바꿀 수 있어야 한다.
- 즉, 하위 클래스는 인터페이스의 규악을 다 지켜야 한다.

ISP 인터페이스 분리 원칙

- 범용 인터페이스 하나보다는 특정 기능에 알맞은 인터페이스 여러개가 낫다.

DIP 의존관계 역전 원칙

- 프로그래머는 “추상화에 의존해야지, 구체화에 의존하면 안된다”
- 즉, 구현 클래스에 의존하지 말고 인터페이스에 의존해야 한다.
예를들어, repository라는 인터페이스가 있다면 클라이언트는 repository만 알고 있으면 된다. 
그 구현체를 세세히 알고 있을 필요는 없다.

결과적으로, 객체지향의 핵심인 `다형성` 을 활용해도 SOLID 원칙을 모두 지킬 수 없다.
그렇기에 `뭔가` 가 더 필요하다. 그래서 `스프링` 과 같은 프레임워크가 등장했다.

## 객체지향 설계와 스프링

결국 스프링은 다형성을 통해 `OCP` 와 `DIP` 를 가능하게 지원해준다.

스프링이 없던 시절에 SOLID 원칙을 모두 지키면서 개발을 하려면 추가적으로 무언가를 더 만들어야 했다.
결국 순수하게 DIP와 OCP원칙을 지키기위해 여러가지 기능들을 만들다 보면 `스프링` 이 만들어지게 될것이다.